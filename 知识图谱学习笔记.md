# 知识图谱学习笔记
## 1 知识图谱
### 1.1 知识图谱是什么
* 知识图谱是数据，只是语义表达更加规范，数据关系链接紧密的数据。
* **知识图谱的本质**就是一种结构化的知识表示形式。知识图谱旨在利用图的结构建模、识别和推断事物之间的复杂关联关系和沉淀领域知识。
* **知识图谱实质**上就是语义网络，用来形容客观世界的概念实体、事件及其之间的关系，并进行语义建模。其数据结构基于图，由节点和边构成。每个节点代表一个“实体”，每条边表示实体之间的“关系”[1]。
* 知识图谱由许多三元组构成，其中每个三元组均由实体（Entity）、属性（Attribute）和关系（Relation）三要素组成。这样的三元组一般采用<实体，关系，实体>或<实体，属性，属性值>的形式，从而构建为图数据格式。
### 1.2 知识图谱三元组
三元组即<实体，关系，实体>或<实体，属性，属性值>，在NLP中，三元组就是SPO三元组（主谓宾三元组）。
### 1.3 知识图谱的演变

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d5a3ca0cddf477994ad1880a65ffee6~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=952&h=278&s=103267&e=png&b=ffffff)
知识图谱得益于Web的发展（更多的是数据层⾯），有着来源于KR、NLP、Web、AI多个⽅⾯的基因。
![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b4d371cbba7408bab1b78cfe676bc37~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1057&h=668&s=129725&e=png&b=ffffff)
### 1.4 KG有哪些技术要素

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a91500e581f4435851ce78ce812be53~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1014&h=576&s=100956&e=png&b=fefefe)
## 2 知识图谱的表示与关联建模
### 2.1 知识表示
知识表示（KR）就是⽤易于计算机处理的⽅式来描述⼈脑的知识。
* 基于离散符号的知识表示
* 基于连续向量的知识表示            

而知识图谱也是一种表示知识的方法
#### 2.1.1 历史中的知识表示方法
* ⼀阶谓词逻辑 (First-Order Logic)
    * Horn logic 
    * Description Logic
* 产⽣式规则 (Production Rule)
* 框架 (Framework)
* 语义⽹络 (Semantic Network)————⾮Semantic Web
    * WordNet
    * RDF、OWL
* 逻辑程序 (Logic Programming)
* 缺省逻辑 (Default Logic)
* 模态逻辑 (Modal Logic)
### 2.2 知识图谱的知识表示
#### 2.2.1 知识图谱符号表示
* 简单图建模
* 有向标记图
    * Property Graph（属性图）
    * RDF（三元组）
* OWL & Ontology
#### 2.2.2 知识图谱的向量表示
知识图谱嵌入模型有很多。
* 知识图谱嵌入模型：
    * TransE，基于向量的模型，向量加法表示关系

    ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39cd1be9e56c44bf99b7c403dfa44753~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1272&h=714&s=441846&e=png&b=f1f6f9)
怎么样评估实体和关系的向量表示的好坏？
    ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4ed90518c1d4093b05f51f762c8053a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1446&h=689&s=386640&e=png&b=f1f6f9)
    
    * DistMult，基于线性变换的模型，向量线性变换表示关系
 
    ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba0e611bdd044f13ae971d7413f9c91e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1769&h=701&s=672270&e=png&b=f1f6f9)
怎么样评估实体和关系的向量表示的好坏？

    ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c18eb80c2be749ecb2d5609ea9996a98~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1440&h=670&s=391278&e=png&b=f0f5f8)

影响评估实体和关系的向量表示的好坏的因素在知识图谱表示学习推理中学习。          
对于更加复杂的知识逻辑，要对知识图谱的向量学习的过程增加更多的约束，同时意味着训练代价更高和可能会语料不充分。
## 3 知识图谱的存储和关联查询
## 4 知识图谱的获取和构建
### 4.1 知识图谱抽取
知识图谱抽取包括实体识别、关系抽取和事件抽取。
#### 4.1.1 实体识别
#### 4.1.2 关系抽取
[知识链接](https://zhuanlan.zhihu.com/p/237452918)

在NLP领域，关系抽取任务，指的是为了构建知识图谱，从结构化(如表3-1)、半结构化（如表3-2）、非结构化数据(如表3-3)中获取形式为(事物1,关系,事物2)的三元组的活动。

表4-1 若干文学形象的结构化信息

| 序号 | 姓名  | 性别 | 物种 | 特长  |
| -- | --- | -- | -- | --- |
| 1  | 陈玄奘 | 男  | 人类 | 紧箍咒 |
| 2  | 孙悟空 | 无  | 石猴 | 掐耳朵 |
| 3  | 猪悟能 | 雄性 | 猪  | 挑扁担 |
| 4  | 沙悟净 | 男  | 未知 | 牵马  |
| 5  | 白龙马 | 雄  | 龙马 | 驼人  |

表4-2 关于若干事物的半结构化信息

| 序号 | 数据                                    |
| -- | ------------------------------------- |
| 1  | {“姓名”:”猪悟能”, “特长”：“挑扁担”}              |
| 2  | {“姓名”:”孙悟空”, “特长”:”掐耳朵”, “武器”: “金箍棒”} |

表4-3 若干非结构化数据

| 序号 | 数据                                                                                        |
| -- | ----------------------------------------------------------------------------------------- |
| 1  | 话说唐僧复得了孙行者，师徒们一心同体，共诣西方。                                                                  |
| 2  | 三藏笑道：“好，好，你师兄叫做悟空，你叫做悟能，其实是我法门中的宗派。”悟能道：“师父，我受了菩萨戒行，断了五荤三厌，在我丈人家持斋把素，更不曾动荤；今日见了师父，我开了斋罢。” |
| 3  | 《西游记》全文、《封神演绎》全文  |

* schema定义了要抽取的**实体类型和实体类型之间的关系**的模板。

表4-4 schema举例

| 序号 | schema                      | 含义                               | 其他           |
| -- | --------------------------- | -------------------------------- | ------------ |
| 1  | （S_TYPE:人物，P:妻子，O_TYPE:人物）  | SPO三元组的主体是人物，与主体关系为妻子的实体，也是一个人物。 | 姚明-妻子-叶莉     |
| 2  | （S_TYPE:公司，P:创始人，O_TYPE:人物） | SPO三元组的主体是公司，与主体关系为创始人的实体，是一个人物。 | 茂新公司-创始人-蒋介石  |

* 三元组抽取模型的结构可以分为2类：

（1）流水线式模型,也叫pipeline式模型。这种模型会使用一个序列标注模型识别文本中的实体；然后使用一个分类器对前面识别出来的实体进行两两之间关系的分类。还是那句老话，流水线式模型存在误差传递，酌情使用。举例来说，如果上一个项目中开发了一个效果极好的实体识别模型，而当前项目的三元组抽取模型训练语料还比较少，那么基于老模型构建一个流水线式的三元组抽取模型、帮我们撑过冷启动阶段，还是挺不错的选择。

（2）联合模型。这种模型一般将实体识别模块和实体关系分类模块整合到一个模型内，让二者共享底层特征、联合二者的损失值进行训练。相对流水线式模型，联合模型中的实体识别模块传递到实体关系分类模块的误差较小；如果结构设计得当，计算速度也会快很多。

## 参考文献
[1]邓力为. 基于知识图谱的文本自动生成技术的研究与实现[D]. 电子科技大学, 2020.
