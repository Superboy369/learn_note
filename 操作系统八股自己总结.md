# 操作系统八股文
## 什么是操作系统？请简要概述一下
操作系统是管理和分配计算机硬件资源和软件资源的一种软件，他协调了不同进程对资源的占用，提高了对计算机资源的使用效率。比如：虚拟内存的抽象提高计算机内存的使用效率，进程的抽象提高cpu的使用效率和不同进程之间的并发和并行，文件系统的抽象提高了外存的使用效率。
## 操作系统的分类有哪些？
操作系统有三类：批处理操作系统、分时操作系统、实时操作系统，兼顾批处理和分时的操作系统为通用操作系统，通用操作系统有Windows、Linux、MacOS。
## 什么是内核态和用户态？
为了防止恶意用户程序破坏操作系统关键代码和资源，操作系统将cpu的执行状态分为内核态和用户态，用户态下只能执行非特权指令，且只能访问用户地址空间，内核态下能执行特权指令，且能访问所有地址空间。
## 特权指令和非特权指令
* 特权指令：清内存指令、置时钟指令、修改页表基址寄存器指令。
* 非特权指令：逻辑运算指令。
## 内核态和用户态之间的切换
* 用户态->内核态：内中断时用户态下执行特殊指令ecall，切换cpu位状态用户态为内核态，外中断时信号线改变cpu位状态。        
* 内核态->用户态：内中断返回时内核态下执行和ecall相反的特殊指令sret，切换cpu位状态内核态为用户态。
* ecall和sret指令的四件事情：
  * 关中断 */* 开中断
  * 用户态->内核态 */* 内核态->用户态
  * pc->sepc、stvec->pc */* sepc->pc
  * 跳转至pc所指地址继续执行汇编代码
