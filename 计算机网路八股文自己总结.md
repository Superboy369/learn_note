# 计算机网络八股文
## 计算机网络通信协议体系结构
* 五层：物理层、数据链路层、网络层、传输层、应用层
* 七层：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层
## 网络数据传输过程

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/316f9ee0c84e41afa6efa96fefa15e90~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=554&h=370&s=821699&e=png&b=e9edf0)
* 物理层：数据帧 -> 比特流
* 数据链路层：分组 + mac头部 + FCS -> 数据帧
* 网络层：报文段 + ip头部 -> 分组（数据报）
* 传输层：原数据 + tcp头部 -> 报文段
* 应用层：原数据
## 应用层协议
## 传输层协议
## 网络层协议
### DHCP协议
主机获得IP地址的途径有两个：一个是自己配置，第二个是通过**DHCP**（**D**ynamic **H**ost **C**onfiguration **P**rotocol，**动态主机配置协议**）。
#### DHCP过程

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2921b90fcb7849a399d80da5d077bd9e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=554&h=150&s=333169&e=png&b=eef0f2)

- **DHCP Discover：在联网时，本机由于没有IP，也不知道DHCP服务器的IP地址是多少，所以根本不知道该向谁发起请求，于是索性选择广播**，向本地网段内所有人发出消息，询问"**谁能给个IP用用**"。

- **DHCP Offer：不是DHCP服务器的机子会忽略你的广播消息，而DHCP服务器收到消息后，会在自己维护的一个IP池里拿出一个空闲IP，通过广播**的形式给回你的电脑。

- **DHCP Request：你的电脑在拿到IP后，再次发起广播**，就说"这个IP我要了"。

- **DHCP ACK：DHCP服务器此时再回复你一个ACK，意思是"ok的"。你就正式获得这个IP在一段时间（比如24小时）里的使用权了。后续只要IP租约不过期**，就可以一直用这个IP进行通信了。

总结：

- 电脑插上网线，联网后会通过DHCP协议动态申请一个IP，同时获得子网掩码，路由器地址等信息。

- DHCP分为四个阶段，分别是 Discover，Offer， Request和ACK。如果曾经连过这个网，机器会记录你上次使用的IP，再次连接时优先使用原来的那个IP，因此只需要经历第三第四阶段。

- DHCP是应用层协议，考虑到需要支持广播功能，底层使用的是UDP协议，而不是TCP协议。

- DHCP分配下来的IP是有可能跟某台手动配置的IP地址重复的。

- DHCP得到IP之后还会发3次无偿ARP通告，在确认没有冲突后开始使用这个IP。
## 数据链路层协议
## 物理层协议


